package dev.guinness.client.module.modules.exploit;

import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraft.network.play.server.SPacketParticles;
import dev.guinness.client.event.events.PacketEvent$PacketReceiveEvent;
import dev.guinness.client.module.Category;
import dev.guinness.client.module.Module;

public class AntiCrash extends Module
{
    public AntiCrash() {
        super("AntiCrash", Category.EXPLOIT, "Stops 254n_m's larp /crash plugin from crashing you");
    }
    
    @SubscribeEvent
    public void onPacketReceive(final PacketEvent$PacketReceiveEvent packetEvent$PacketReceiveEvent) {
        if (packetEvent$PacketReceiveEvent.getPacket() instanceof SPacketParticles) {
            final SPacketParticles packet = (SPacketParticles)packetEvent$PacketReceiveEvent.getPacket();
            if (packet.getParticleCount() > 800) {
                packetEvent$PacketReceiveEvent.setCanceled(true);
            }
        }
    }
}
